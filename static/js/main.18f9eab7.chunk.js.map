{"version":3,"sources":["img/spinner.svg","store/firebase/firebaseContext.js","Products/Products.js","Header/Header.js","Card/Card.js","Loader/Loader.js","App.js","store/firebase/firebaseReducer.js","store/firebase/firebaseState.js","index.js"],"names":["module","exports","FirebaseContext","createContext","Products","item","name","price","img","id","productsArray","firebase","useContext","active","btnName","map","num","btnActive","className","alt","src","toLocaleString","onClick","pushBtn","Header","aria-label","role","length","Card","key","Loader","spinner","App","useState","state","setState","visible","setVisible","items","products","fetchProducts","fetchItems","loading","useEffect","Object","entries","addItem","indexOf","newList","filter","firebaseReducer","action","type","payload","FirebaseState","children","useReducer","dispatch","showLoader","a","axios","get","res","data","firebaseIds","values","addProduct","deleteProduct","post","delete","Provider","value","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.18f9eab7.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/spinner.05db979e.svg\";","import {createContext} from \"react\";\n\nexport const FirebaseContext = createContext();","import React, {useContext} from 'react';\nimport './Products.scss'\nimport {FirebaseContext} from \"../store/firebase/firebaseContext\";\n\nexport const Products = ({item, name, price, img, id, productsArray}) =>{\n\n    const firebase = useContext(FirebaseContext);\n\n    let active = false;\n    let btnName = 'Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð² ÐºÐ¾Ñ€Ð·Ð¸Ð½Ñƒ';\n\n    productsArray.map(num => {\n        if (num.id === item.id){\n            active = true;\n            btnName = 'Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ Ð¸Ð· ÐºÐ¾Ñ€Ð·Ð¸Ð½Ñ‹';\n        }\n        return null;\n    });\n\n    const btnActive = 'products-element__btn ' + (active ? 'products-element__btn_active' : '');\n\n    return (\n        <>\n            <li className=\"products-element\">\n                <span className=\"products-element__name\">{name}</span>\n                <img className=\"products-element__img\" alt=\"img\"  src={img}/>\n                <span className=\"products-element__price\">{price.toLocaleString()} RUB</span>\n                <button onClick={()=> firebase.pushBtn(id)} className={btnActive}>{btnName}</button>\n            </li>\n        </>\n    )\n};","import React from 'react';\nimport './Header.scss'\n\nexport const Header =({onClick, productsArray})=>{\n    return(\n        <div className=\"header\">\n            <div onClick={onClick} className=\"header-count\">\n                <span aria-label=\"basket\" role=\"img\">ðŸ›’</span>\n                {productsArray.length}\n            </div>\n        </div>\n    )\n};\n","import React from 'react';\nimport './Card.scss';\n\nexport const Card =({productsArray, item})=>{\n\n    return(\n        <>\n\n            {productsArray.map(num => {\n                if (num.id === item.id){\n                    return(\n                        <tr key={item.id}>\n                            <td className=\"card-element__name\"><span aria-label=\"rocket\" role=\"img\">ðŸŽ¾</span> {item.name}</td>\n                            <td className=\"card-element__price\">{item.price.toLocaleString()} RUB</td>\n                        </tr>\n                    )\n                }\n                return null;\n            })}\n\n        </>\n    )\n};","import React from 'react';\nimport './Loader.scss';\nimport spinner from '../img/spinner.svg'\n\nexport const Loader =()=>{\n    return(\n        <div className=\"spinner\">\n            <img className=\"spinner-img\" src={spinner} alt=\"spinner\"/>\n        </div>\n    )\n}","import React, {useEffect, useState, useContext} from 'react';\nimport {Products} from \"./Products/Products\";\nimport {Header} from \"./Header/Header\";\nimport {Card} from \"./Card/Card\";\nimport {FirebaseContext} from \"./store/firebase/firebaseContext\";\nimport {Loader} from \"./Loader/Loader\";\n\nfunction App() {\n\n    const [state, setState] = useState([]);\n    const [visible, setVisible] = useState(false);\n    const {items, products, fetchProducts, fetchItems, loading} = useContext(FirebaseContext);\n    let price = 0;\n    let productsArray = [];\n\n    useEffect(()=> {\n       fetchItems();\n       fetchProducts()\n        // eslint-disable-next-line\n    }, []);\n\n    if (products){\n        productsArray = Object.entries(products).map(([key, value]) => {\n            return {name: key, id: value}\n        })\n    }\n\n    const addItem =(id)=>{\n\n        const index = state.indexOf(id);\n\n        if (index === -1){\n            setState([...state, id])\n        }else {\n            const newList = state.filter(item => item!== id);\n            setState(newList);\n        }\n    };\n\n    items.map(item=> {\n        productsArray.map(num =>{\n                if (num.id === item.id){\n                    price += item.price\n                } return null\n        })\n        return null\n    });\n\n    return (\n        <div>\n            <Header onClick={()=> setVisible(true)} productsArray={productsArray} state={state}/>\n\n            {loading ? <Loader/> : null}\n\n            <ul className=\"products-container\">\n                {items.map(item => <Products addItem={()=> addItem(item.id)} key={item.id} name={item.name} price={item.price} item={item} img={item.img} id={item.id} productsArray={productsArray}/>)}\n            </ul>\n\n            {visible && <div className=\"card\">\n                <div onClick={()=> setVisible(false)} className=\"card__close\"></div>\n                <table>\n                    <tbody>\n                    {items.map(item => <Card key={item.id} productsArray={productsArray} item={item}/>)}\n                    <tr>\n                        <td className=\"card-element__name\"><span aria-label=\"money\" role=\"img\">ðŸ’³</span> Ð¡ÑƒÐ¼Ð¼Ð°:</td>\n                        <td className=\"card-element__price\">{price.toLocaleString()} RUB</td>\n                    </tr>\n                    </tbody>\n                </table>\n            </div>\n            }\n\n        </div>\n  );\n}\n\nexport default App;\n","export const firebaseReducer = (state, action) =>{\n    switch (action.type) {\n        case \"SHOW_LOADER\":\n            return ({...state, loading: true});\n        case \"FETCH_ITEMS\":\n            return ({...state, items: action.payload, loading: false});\n        case \"FETCH_PRODUCTS\":\n            return ({...state, products: action.payload, loading: false});\n        default:\n            return state;\n    }\n};","import React, {useReducer} from 'react';\nimport axios from 'axios';\n\nimport {FirebaseContext} from \"./firebaseContext\";\nimport {firebaseReducer} from \"./firebaseReducer\";\n\nexport const FirebaseState =({children}) =>{\n\n    const initialState = {\n        items: [],\n        products: [],\n        loading: false\n    };\n\n    const [state, dispatch] = useReducer(firebaseReducer, initialState);\n\n    const showLoader =()=> dispatch({type: \"SHOW_LOADER\"});\n\n    const fetchItems = async ()=>{\n        showLoader();\n        const res = await axios.get(\"https://e-shop-react-d0c9b.firebaseio.com/items.json\");\n        const payload = res.data;\n        dispatch({type: \"FETCH_ITEMS\", payload})\n    };\n\n    const fetchProducts = async ()=>{\n        showLoader()\n        const res = await axios.get(\"https://e-shop-react-d0c9b.firebaseio.com/products.json\");\n        const payload = res.data;\n        dispatch({type: \"FETCH_PRODUCTS\", payload})\n    };\n\n    const pushBtn = async (id)=>{\n\n        const res = await axios.get(\"https://e-shop-react-d0c9b.firebaseio.com/products.json\");\n        if (res.data){\n            const firebaseIds = Object.values(res.data)\n\n            const index = firebaseIds.indexOf(id);\n\n            if (index === -1){\n                addProduct(id)\n            }else {\n                firebaseIds.map(num=> {\n                    if (id === num){\n                        Object.entries(res.data).map(([key, value]) => {\n                            if (value === num){\n                                deleteProduct(key)\n                            }\n                        })\n                    }else {\n\n                    }\n                })\n\n            }\n        }else {\n            addProduct(id)\n        }\n    };\n\n\n\n    const addProduct =async (id)=>{\n        //showLoader()\n        await axios.post(\"https://e-shop-react-d0c9b.firebaseio.com/products.json\", id);\n        fetchProducts()\n\n    }\n\n    const deleteProduct =async (id)=>{\n        await axios.delete(`https://e-shop-react-d0c9b.firebaseio.com/products/${id}.json`);\n        fetchProducts()\n    };\n\n    return(\n        <FirebaseContext.Provider value={{\n            showLoader, loading: state.loading, pushBtn, fetchItems, items: state.items, fetchProducts, products: state.products\n        }}>\n\n            {children}\n\n        </FirebaseContext.Provider>\n    )\n};","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport './index.scss'\nimport App from './App';\nimport {FirebaseState} from \"./store/firebase/firebaseState\";\n\nReactDOM.render(\n    <FirebaseState>\n        <App />\n    </FirebaseState>,\n  document.getElementById('root')\n);"],"sourceRoot":""}