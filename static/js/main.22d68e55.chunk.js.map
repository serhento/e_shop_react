{"version":3,"sources":["img/spinner.svg","store/firebase/firebaseContext.js","Products/Products.js","Header/Header.js","Card/Card.js","Loader/Loader.js","App.js","store/firebase/firebaseReducer.js","store/firebase/firebaseState.js","index.js"],"names":["module","exports","FirebaseContext","createContext","Products","item","name","price","img","id","productsArray","firebase","useContext","active","btnName","map","num","btnActive","className","alt","src","toLocaleString","onClick","pushBtn","Header","aria-label","role","length","Card","deleteProduct","key","Loader","spinner","App","useState","state","setState","visible","setVisible","items","products","fetchProducts","fetchItems","loading","useEffect","Object","entries","addItem","indexOf","newList","filter","firebaseReducer","action","type","payload","FirebaseState","children","useReducer","dispatch","showLoader","a","axios","get","res","data","firebaseIds","values","addProduct","post","delete","Provider","value","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.22d68e55.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/spinner.05db979e.svg\";","import {createContext} from \"react\";\n\nexport const FirebaseContext = createContext();","import React, {useContext} from 'react';\nimport './Products.scss'\nimport {FirebaseContext} from \"../store/firebase/firebaseContext\";\n\nexport const Products = ({item, name, price, img, id, productsArray}) =>{\n\n    const firebase = useContext(FirebaseContext);\n\n    let active = false;\n    let btnName = 'Add to cart';\n\n    productsArray.map(num => {\n        if (num.id === item.id){\n            active = true;\n            btnName = 'Delete from cart';\n        }\n        return null;\n    });\n\n    const btnActive = 'products-element__btn ' + (active ? 'products-element__btn_active' : '');\n\n    return (\n        <>\n            <li className=\"products-element\">\n                <span className=\"products-element__name\">{name}</span>\n                <img className=\"products-element__img\" alt=\"img\"  src={img}/>\n                <span className=\"products-element__price\">{price.toLocaleString()} RUB</span>\n                <button onClick={()=> firebase.pushBtn(id)} className={btnActive}>{btnName}</button>\n            </li>\n        </>\n    )\n};","import React from 'react';\nimport './Header.scss'\n\nexport const Header =({onClick, productsArray})=>{\n    return(\n        <div className=\"header\">\n            <div onClick={onClick} className=\"header-count\">\n                <span aria-label=\"basket\" role=\"img\">ðŸ›’</span>\n                {productsArray.length}\n            </div>\n        </div>\n    )\n};\n","import React from 'react';\nimport './Card.scss';\nimport axios from \"axios\";\n\nexport const Card =({productsArray, item, deleteProduct})=>{\n\n    // const deleteItem =async (id)=>{\n    //     await axios.delete(`https://e-shop-react-d0c9b.firebaseio.com/products/${id}.json`);\n    // };\n\n    return(\n        <>\n\n            {productsArray.map(num => {\n                if (num.id === item.id){\n                    return(\n                        <div key={item.id} className=\"card-elements\">\n                            <div className=\"card-elements__box\">\n                                <div className=\"card-element__name\"><span aria-label=\"rocket\" role=\"img\">ðŸŽ¾</span> {item.name}</div>\n                                <div className=\"card-element__price\">{item.price.toLocaleString()} RUB</div>\n                            </div>\n                            <button onClick={()=>deleteProduct(num.name)} className=\"card-element__delete\" >Delete</button>\n                        </div>\n                    )\n                }\n                return null;\n            })}\n\n        </>\n    )\n};","import React from 'react';\nimport './Loader.scss';\nimport spinner from '../img/spinner.svg'\n\nexport const Loader =()=>{\n    return(\n        <div className=\"spinner\">\n            <img className=\"spinner-img\" src={spinner} alt=\"spinner\"/>\n        </div>\n    )\n}","import React, {useEffect, useState, useContext} from 'react';\nimport {Products} from \"./Products/Products\";\nimport {Header} from \"./Header/Header\";\nimport {Card} from \"./Card/Card\";\nimport {FirebaseContext} from \"./store/firebase/firebaseContext\";\nimport {Loader} from \"./Loader/Loader\";\n\nfunction App() {\n\n    const [state, setState] = useState([]);\n    const [visible, setVisible] = useState(false);\n    const {items, products, fetchProducts, fetchItems, loading, deleteProduct} = useContext(FirebaseContext);\n    let price = 0;\n    let productsArray = [];\n\n    useEffect(()=> {\n       fetchItems();\n       fetchProducts()\n        // eslint-disable-next-line\n    }, []);\n\n    if (products){\n        productsArray = Object.entries(products).map(([key, value]) => {\n            return {name: key, id: value}\n        })\n    }\n\n    const addItem =(id)=>{\n\n        const index = state.indexOf(id);\n\n        if (index === -1){\n            setState([...state, id])\n        }else {\n            const newList = state.filter(item => item!== id);\n            setState(newList);\n        }\n    };\n\n    items.map(item=> {\n        productsArray.map(num =>{\n                if (num.id === item.id){\n                    price += item.price\n                } return null\n        })\n        return null\n    });\n\n    return (\n        <div>\n            <Header onClick={()=> setVisible(true)} productsArray={productsArray} state={state}/>\n\n            {loading ? <Loader/> : null}\n\n            <ul className=\"products-container\">\n                {items.map(item => <Products addItem={()=> addItem(item.id)} key={item.id} name={item.name} price={item.price} item={item} img={item.img} id={item.id} productsArray={productsArray}/>)}\n            </ul>\n\n            {visible && <div className=\"card\">\n                <div onClick={()=> setVisible(false)} className=\"card__close\"></div>\n                <div>\n                    <div>\n                    {items.map(item => <Card deleteProduct={deleteProduct} key={item.id} productsArray={productsArray} item={item}/>)}\n                    <div className=\"card-elements\">\n                        <div className=\"card-element__name\"><span aria-label=\"money\" role=\"img\">ðŸ’³</span> Sum:</div>\n                        <div className=\"card-element__price-sum\">{price.toLocaleString()} RUB</div>\n                    </div>\n                    </div>\n                </div>\n            </div>\n            }\n\n        </div>\n  );\n}\n\nexport default App;\n","export const firebaseReducer = (state, action) =>{\n    switch (action.type) {\n        case \"SHOW_LOADER\":\n            return ({...state, loading: true});\n        case \"FETCH_ITEMS\":\n            return ({...state, items: action.payload, loading: false});\n        case \"FETCH_PRODUCTS\":\n            return ({...state, products: action.payload, loading: false});\n        default:\n            return state;\n    }\n};","import React, {useReducer} from 'react';\nimport axios from 'axios';\n\nimport {FirebaseContext} from \"./firebaseContext\";\nimport {firebaseReducer} from \"./firebaseReducer\";\n\nexport const FirebaseState =({children}) =>{\n\n    const initialState = {\n        items: [],\n        products: [],\n        loading: false\n    };\n\n    const [state, dispatch] = useReducer(firebaseReducer, initialState);\n\n    const showLoader =()=> dispatch({type: \"SHOW_LOADER\"});\n\n    const fetchItems = async ()=>{\n        showLoader();\n        const res = await axios.get(\"https://e-shop-react-d0c9b.firebaseio.com/items.json\");\n        const payload = res.data;\n        dispatch({type: \"FETCH_ITEMS\", payload})\n    };\n\n    const fetchProducts = async ()=>{\n        showLoader()\n        const res = await axios.get(\"https://e-shop-react-d0c9b.firebaseio.com/products.json\");\n        const payload = res.data;\n        dispatch({type: \"FETCH_PRODUCTS\", payload})\n    };\n\n    const pushBtn = async (id)=>{\n\n        const res = await axios.get(\"https://e-shop-react-d0c9b.firebaseio.com/products.json\");\n        if (res.data){\n            const firebaseIds = Object.values(res.data)\n\n            const index = firebaseIds.indexOf(id);\n\n            if (index === -1){\n                addProduct(id)\n            }else {\n                firebaseIds.map(num=> {\n                    if (id === num){\n                        Object.entries(res.data).map(([key, value]) => {\n                            if (value === num){\n                                deleteProduct(key)\n                            }\n                        })\n                    }else {\n\n                    }\n                })\n\n            }\n        }else {\n            addProduct(id)\n        }\n    };\n\n\n\n    const addProduct =async (id)=>{\n        //showLoader()\n        await axios.post(\"https://e-shop-react-d0c9b.firebaseio.com/products.json\", id);\n        fetchProducts()\n\n    }\n\n    const deleteProduct =async (id)=>{\n        await axios.delete(`https://e-shop-react-d0c9b.firebaseio.com/products/${id}.json`);\n        fetchProducts()\n    };\n\n    return(\n        <FirebaseContext.Provider value={{\n            showLoader, deleteProduct, loading: state.loading, pushBtn, fetchItems, items: state.items, fetchProducts, products: state.products\n        }}>\n\n            {children}\n\n        </FirebaseContext.Provider>\n    )\n};","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport './index.scss'\nimport App from './App';\nimport {FirebaseState} from \"./store/firebase/firebaseState\";\n\nReactDOM.render(\n    <FirebaseState>\n        <App />\n    </FirebaseState>,\n  document.getElementById('root')\n);"],"sourceRoot":""}